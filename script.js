var vmObject=[{cloud:"AWS",size:"Small",types:{CPU:["1CPU"],Memory:[".5GB","1GB","3.5GB"],Disk:["50GB","100GB","200GB"]}},{cloud:"AWS",size:"Small",types:{CPU:["1CPU"],Memory:[".5GB","1GB","3.5GB"],Disk:["50GB","100GB","200GB"]}},{cloud:"AWS",size:"Medium",types:{CPU:["1CPU"],Memory:["8GB","16GB"],Disk:["50GB","100GB","200GB"]}},{cloud:"AWS",size:"Large",types:{CPU:["1CPU"],Memory:["7GB","8GB","14GB","16GB","28GB"],Disk:["50GB","100GB","200GB"]}},{cloud:"Azure",size:"X-Large",types:{CPU:["1CPU"],Memory:[".5GB","1GB","3.5GB"],Disk:["50GB","100GB","200GB"]}},{cloud:"Azure",size:"XX-Large",types:{CPU:["1CPU"],Memory:[".5GB","1GB","3.5GB"],Disk:["50GB","100GB","200GB"]}},{cloud:"Onprem",size:"X-Large",types:{CPU:["1CPU"],Memory:["5GB","10GB","13.5GB"],Disk:["50GB","100GB","200GB"]}}],regions=["West","East"],carts=[],cartId=1,selectedId=-1;function getCloudTypes(){let e=vmObject.map(e=>e.cloud);return[...new Set(e)]}function getVMSizes(e){let t=vmObject.filter(t=>t.cloud===e).map(e=>e.size);return[...new Set(t)]}function getVMObject(e,t){return vmObject.find(i=>i.cloud===e&&i.size===t)}function generateOptionHTML(e){let t="";if(!e)return t;for(let i=0;i<e.length;i++){let o=e[i];t+=`<option value="${o}">${o}</option>`}return t}function getSelectedObject(){let e=$("#cloud").val(),t=$("#size").val(),i=$("#region").val(),o=parseInt($("#count").val()),l=$("#cpu").val(),n=$("#memory").val(),r=$("#disk").val();return{cloud:e,size:t,count:o,cpu:l,memory:n,disk:r,region:i}}function initRegion(){let e='<option value="">Select Region</option>'+generateOptionHTML(regions);$("#region").html(e)}function initCloudSelect(){let e=getCloudTypes(),t='<option value="">Select Cloud Provider</option>'+generateOptionHTML(e);$("#cloud").html(t)}function initVMSize(){let e=$("#cloud").val(),t=getVMSizes(e),i='<option value="">Select VM Size</option>'+generateOptionHTML(t);$("#size").html(i),initComponents()}function initRegionActive(){let e=$("#cloud").val();"onprem"===e.toLocaleLowerCase()?($("#region").val(""),$("#region").attr("disabled",!0)):$("#region").attr("disabled",!1)}function initComponents(){let e=$("#cloud").val(),t=$("#size").val(),i=["CPU","Memory","Disk"];["cpu","memory","disk"].forEach((o,l)=>{let n=`<option value="">Select ${i[l]}</option>`,r=getVMObject(e,t);if(r){let c=r.types[i[l]];n+=generateOptionHTML(c)}$(`#${o}`).html(n)})}function validateInfo(e,t=!1){let i=["cloud","size","memory","disk","cpu","count","region"],o=!0;for(let l=0;l<i.length;l++){let n=i[l];if("region"===n&&"onprem"===e.cloud.toLocaleLowerCase()){$("#"+n+"-error").removeClass("show");continue}"count"!==n&&e[n]||"count"===n&&e[n]>0?$("#"+n+"-error").removeClass("show"):(t&&$("#"+n+"-error").addClass("show"),o=!1)}return o}function getPrice(e){let t=0;if(validateInfo(e)){let i=regions.indexOf(e.region),o=parseInt(e.cpu)||0,l=parseInt(e.memory)||0,n=parseInt(e.disk)||0;t=(200*o+20*l+3*n)*(i+2)*e.count}return t}function updatePrice(){let e=getSelectedObject(),t=getPrice(e);$("#price").html("$"+t)}function changedInput(e){let t=$("#"+e).val();switch(t?$("#"+e+"-error").removeClass("show"):$("#"+e+"-error").addClass("show"),e){case"cloud":initVMSize(),initRegionActive();break;case"size":initComponents()}updatePrice()}function openModal(e,t){if("add"===e)$("#modal-btn").html("Add Cart");else{let i=carts.find(e=>e.id==t);if(!i)return;selectedId=t,$("#cloud").val(i.cloud),initVMSize(),initRegionActive(),$("#size").val(i.size),initComponents(),$("#cpu").val(i.cpu),$("#memory").val(i.memory),$("#disk").val(i.disk),$("#quantity").val(i.quantity),$("#count").val(i.count),$("#region").val(i.region),updatePrice(),$("#modal-btn").html("Update Cart")}$("#cart-modal").modal()}function updateCarts(){let e="";for(let t=0;t<carts.length;t++){let i=carts[t];e+=`<tr onclick="openModal('edit', ${i.id})">
        <td class="item">
            <div class="d-flex align-items-start">
                <img src="./img/itm.webp" alt="">
                <div class="item-cloud">
                    ${i.cloud}
                    <div class="text-uppercase new"><span class="fas fa-star"></span>${i.size}</div>
                </div>
            </div>
        </td>
        <td>${i.region}</td>
        <td>${i.cpu}</td>
        <td>${i.memory}</td>
        <td>${i.disk}</td>
        <td>${i.count}</td>
        <td class="font-weight-bold">
            $${i.price}
            <div class="cart-remove close" onclick="removeCart(${i.id})">&times;</div>
        </td>
    </tr>`}carts.length||(e='<tr><td colspan=7><hr class="mt-0">No carts<hr class="mb-0"></td></tr>'),$("#carts").html(e),$("#total-count").html(carts.length),$("#total-price").html("$"+carts.reduce((e,t)=>e+t.price,0))}function removeCart(e){let t=carts.findIndex(t=>t.id==e);return t>-1&&carts.splice(t,1),updateCarts(),!1}function modalBtnClicked(){let e=$("#modal-btn").html(),t=getSelectedObject();if(!validateInfo(t,!0))return;let i=getPrice(t);if("Add Cart"===e)carts.push({id:cartId++,price:i,...t});else{let o=carts.findIndex(e=>e.id==selectedId);o>-1&&(carts[o]={...carts[o],price:i,...t})}updateCarts(),$("#cart-modal").modal("hide")}$(function(){$("#add-cart").click(()=>openModal("add")),$("#modal-btn").click(()=>modalBtnClicked()),initRegion(),initCloudSelect(),initVMSize(),updatePrice(),updateCarts()});